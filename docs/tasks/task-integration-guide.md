# ë°±ì—”ë“œ ê°œë°œ ì‘ì—… í†µí•© ê°€ì´ë“œ

> ë¬¼ ì„­ì·¨ ìŠµê´€ ê´€ë¦¬ ì•± - ë°±ì—”ë“œ ê°œë°œ ì‘ì—… ë¶„ì¥ ë° í†µí•© ê°€ì´ë“œ

---

## ğŸ“‹ ê°œìš”

ì´ ë¬¸ì„œëŠ” ë°±ì—”ë“œ ê°œë°œì„ ë³‘ë ¬ë¡œ ìˆ˜í–‰ ê°€ëŠ¥í•œ ì‘ì—… ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ê³ , ê° ì‘ì—…ì„ í†µí•©í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

### ì „ì²´ ì‘ì—… ëª©í‘œ
- Supabase PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶•
- Next.js API Routes/Server Actionsë¡œ ë°±ì—”ë“œ API êµ¬í˜„
- Gemini API ì—°ë™ (gemini-3-flash-preview ëª¨ë¸ ì‚¬ìš©)
- í”„ë¡ íŠ¸ì—”ë“œ í˜ì´ì§€ì™€ ì™„ì „í•œ ì—°ë™

---

## ğŸ¯ ì‘ì—… ë‹¨ìœ„ ë¶„ë¥˜

ì´ **5ê°œì˜ ë…ë¦½ì ì¸ ì‘ì—… ë‹¨ìœ„**ë¡œ ë¶„ë¦¬ë˜ë©°, ê°ê° ë³‘ë ¬ë¡œ ê°œë°œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

| ì‘ì—… ID | ì‘ì—…ëª… | ì˜ˆìƒ ì†Œìš” | ìš°ì„ ìˆœìœ„ | í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ |
|---------|--------|-----------|----------|-----------------|
| Task 1 | Supabase ì„¤ì • ë° DB ìŠ¤í‚¤ë§ˆ êµ¬ì¶• | 1-2ì‹œê°„ | P0 (ìµœìš°ì„ ) | ëª¨ë“  í˜ì´ì§€ |
| Task 2 | ë¬¼ ì„­ì·¨ ê¸°ë¡ API | 2-3ì‹œê°„ | P0 | í™ˆ í˜ì´ì§€ |
| Task 3 | ì»¨ë””ì…˜ ë©”ëª¨ API | 1-2ì‹œê°„ | P1 | í™ˆ í˜ì´ì§€ |
| Task 4 | íˆìŠ¤í† ë¦¬ ì¡°íšŒ API | 2-3ì‹œê°„ | P0 | íˆìŠ¤í† ë¦¬ í˜ì´ì§€ |
| Task 5 | AI ë¦¬í¬íŠ¸ ìƒì„± API | 3-4ì‹œê°„ | P0 | ë¦¬í¬íŠ¸ í˜ì´ì§€ |

---

## ğŸ“Š ì‘ì—… ì˜ì¡´ì„± ë° ìˆœì„œ

```mermaid
graph TD
    T1["Task 1: DB ì„¤ì •<br/>(í•„ìˆ˜ ì„ í–‰)"] --> T2["Task 2: ë¬¼ ì„­ì·¨ ê¸°ë¡ API"]
    T1 --> T3["Task 3: ì»¨ë””ì…˜ ë©”ëª¨ API"]
    T1 --> T4["Task 4: íˆìŠ¤í† ë¦¬ ì¡°íšŒ API"]
    T1 --> T5["Task 5: AI ë¦¬í¬íŠ¸ API"]
    
    T2 -.->|ë°ì´í„° ì°¸ì¡°| T4
    T2 -.->|ë°ì´í„° ì°¸ì¡°| T5
    T3 -.->|ë°ì´í„° ì°¸ì¡°| T5
    
    style T1 fill:#ff6b6b
    style T2 fill:#4ecdc4
    style T3 fill:#95e1d3
    style T4 fill:#4ecdc4
    style T5 fill:#4ecdc4
```

### ì˜ì¡´ì„± ì„¤ëª…

**í•„ìˆ˜ ì„ í–‰ ì‘ì—…**
- **Task 1**ì€ ëª¨ë“  ì‘ì—…ì˜ ì„ í–‰ ì¡°ê±´ (ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í•„ìš”)

**ë³‘ë ¬ ìˆ˜í–‰ ê°€ëŠ¥**
- Task 2, 3, 4, 5ëŠ” Task 1 ì™„ë£Œ í›„ **ë™ì‹œì— ë³‘ë ¬ ê°œë°œ ê°€ëŠ¥**
- ê° TaskëŠ” ì„œë¡œ ë‹¤ë¥¸ í…Œì´ë¸”/ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë‹¤ë£¨ë¯€ë¡œ ì¶©ëŒ ì—†ìŒ

**ë°ì´í„° ì°¸ì¡° ê´€ê³„**
- Task 4, 5ëŠ” Task 2ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒë§Œ í•˜ë¯€ë¡œ ê°œë°œ ì¤‘ì—ë„ ë¬¸ì œì—†ìŒ
- Task 5ëŠ” Task 3ì˜ ë°ì´í„°ë„ ì„ íƒì ìœ¼ë¡œ ì°¸ì¡° (ì—†ì–´ë„ ì‘ë™)

---

## ğŸ”„ í†µí•© ì „ëµ

### 1ë‹¨ê³„: ê¸°ë°˜ êµ¬ì¶• (Task 1)
```bash
# Task 1 ì™„ë£Œ í›„ í™•ì¸ì‚¬í•­
âœ“ Supabase í”„ë¡œì íŠ¸ ìƒì„±
âœ“ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
âœ“ 3ê°œ í…Œì´ë¸” ìƒì„± (water_logs, condition_memos, ai_reports)
âœ“ Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
```

### 2ë‹¨ê³„: ë³‘ë ¬ ê°œë°œ (Task 2, 3, 4, 5)
ê° ê°œë°œìê°€ ë…ë¦½ì ìœ¼ë¡œ ì‘ì—… ê°€ëŠ¥:
- ì„œë¡œ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ì‘ì—… (íŒŒì¼ ì¶©ëŒ ì—†ìŒ)
- ì„œë¡œ ë‹¤ë¥¸ API ì—”ë“œí¬ì¸íŠ¸ (ë¼ìš°íŒ… ì¶©ëŒ ì—†ìŒ)
- ë…ë¦½ì ì¸ í…Œì´ë¸” ì ‘ê·¼ (DB ì¶©ëŒ ì—†ìŒ)

### 3ë‹¨ê³„: í†µí•© ë° í…ŒìŠ¤íŠ¸
```bash
# ëª¨ë“  Task ì™„ë£Œ í›„
1. ê° API ì—”ë“œí¬ì¸íŠ¸ ê°œë³„ í…ŒìŠ¤íŠ¸
2. í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸
3. ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
```

---

## ğŸ“ íŒŒì¼ êµ¬ì¡° ë° ì¶©ëŒ ë°©ì§€

### ì˜ˆìƒ íŒŒì¼ êµ¬ì¡°
```
water/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ client.ts           [Task 1]
â”‚   â”‚   â””â”€â”€ schema.sql          [Task 1]
â”‚   â””â”€â”€ ai/
â”‚       â””â”€â”€ gemini.ts           [Task 5]
â”œâ”€â”€ app/
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ water-logs/
â”‚       â”‚   â””â”€â”€ route.ts        [Task 2]
â”‚       â”œâ”€â”€ condition-memos/
â”‚       â”‚   â””â”€â”€ route.ts        [Task 3]
â”‚       â”œâ”€â”€ history/
â”‚       â”‚   â””â”€â”€ route.ts        [Task 4]
â”‚       â””â”€â”€ reports/
â”‚           â”œâ”€â”€ route.ts        [Task 5]
â”‚           â””â”€â”€ generate/
â”‚               â””â”€â”€ route.ts    [Task 5]
â””â”€â”€ actions/
    â”œâ”€â”€ water-logs.ts           [Task 2]
    â”œâ”€â”€ condition-memos.ts      [Task 3]
    â”œâ”€â”€ history.ts              [Task 4]
    â””â”€â”€ reports.ts              [Task 5]
```

### ì¶©ëŒ ë°©ì§€ ê·œì¹™
âœ… **ê° TaskëŠ” ë³„ë„ ë””ë ‰í† ë¦¬/íŒŒì¼ì—ì„œ ì‘ì—…**  
âœ… **ê³µí†µ íŒŒì¼(lib/supabase/client.ts)ì€ Task 1ì—ì„œë§Œ ìƒì„±**  
âœ… **íƒ€ì… ì •ì˜ëŠ” ê° Taskë³„ íŒŒì¼ì— í¬í•¨ (ë‚˜ì¤‘ì— í†µí•© ê°€ëŠ¥)**  
âœ… **í™˜ê²½ ë³€ìˆ˜ëŠ” ê³µìœ í•˜ë˜, ê° TaskëŠ” ë…ë¦½ì ìœ¼ë¡œ ì ‘ê·¼**

---

## ğŸ”— í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ë§¤í•‘

### í™ˆ í˜ì´ì§€ (/)
- **ì»´í¬ë„ŒíŠ¸**: `IntakeRecorder`, `TodayIntakeList`
- **í•„ìš” API**: Task 2 (ë¬¼ ì„­ì·¨ ê¸°ë¡ CRUD)
- **ì„ íƒ API**: Task 3 (ì»¨ë””ì…˜ ë©”ëª¨)

### íˆìŠ¤í† ë¦¬ í˜ì´ì§€ (/history)
- **ì»´í¬ë„ŒíŠ¸**: `CalendarView`
- **í•„ìš” API**: Task 4 (ë‚ ì§œë³„ ê¸°ë¡ ì¡°íšŒ)

### ë¦¬í¬íŠ¸ í˜ì´ì§€ (/reports)
- **ì»´í¬ë„ŒíŠ¸**: `ReportGenerator`, `ReportList`
- **í•„ìš” API**: Task 5 (ë¦¬í¬íŠ¸ ìƒì„± ë° ì¡°íšŒ)

---

## ğŸ“ ê° ì‘ì—…ë³„ ì‹¤í–‰ í”„ë¡¬í”„íŠ¸

### Task 1: Supabase ì„¤ì • ë° DB ìŠ¤í‚¤ë§ˆ

```
@docs/tasks/task-database-setup-plan.md @docs/software_design.md ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Supabase ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì •í•˜ê³  ìŠ¤í‚¤ë§ˆë¥¼ êµ¬ì¶•í•´ì¤˜.

í•„ìˆ˜ ì‘ì—…:
1. Supabase í”„ë¡œì íŠ¸ ì—°ë™ (í™˜ê²½ ë³€ìˆ˜ ì„¤ì •)
2. water_logs, condition_memos, ai_reports í…Œì´ë¸” ìƒì„±
3. lib/supabase/client.ts íŒŒì¼ ìƒì„±
4. ì—°ê²° í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

ì°¸ê³  ë¬¸ì„œ:
- docs/software_design.md (ë°ì´í„°ë² ì´ìŠ¤ ERD ë° ìŠ¤í‚¤ë§ˆ)
- docs/PRD.md (í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­)
```

### Task 2: ë¬¼ ì„­ì·¨ ê¸°ë¡ API

```
@docs/tasks/task-water-logs-api-plan.md @docs/user_stories.md (US-001, US-003, US-015) ë¥¼ ì°¸ê³ í•˜ì—¬ ë¬¼ ì„­ì·¨ ê¸°ë¡ APIë¥¼ êµ¬í˜„í•´ì¤˜.

í•„ìˆ˜ ì‘ì—…:
1. POST /api/water-logs - ê¸°ë¡ ìƒì„±
2. GET /api/water-logs - ê¸°ë¡ ì¡°íšŒ (ë‚ ì§œ ë²”ìœ„)
3. PATCH /api/water-logs/[id] - ê¸°ë¡ ìˆ˜ì •
4. DELETE /api/water-logs/[id] - ê¸°ë¡ ì‚­ì œ
5. Server Actions (actions/water-logs.ts) êµ¬í˜„
6. í”„ë¡ íŠ¸ì—”ë“œ IntakeRecorder, TodayIntakeListì™€ ì—°ë™

ì°¸ê³  ë¬¸ì„œ:
- docs/user_stories.md (US-001, US-003, US-015)
- components/features/intake/intake-recorder.tsx
- components/features/intake/today-intake-list.tsx
```

### Task 3: ì»¨ë””ì…˜ ë©”ëª¨ API

```
@docs/tasks/task-condition-memos-api-plan.md @docs/user_stories.md (US-009, US-010) ë¥¼ ì°¸ê³ í•˜ì—¬ ì»¨ë””ì…˜ ë©”ëª¨ APIë¥¼ êµ¬í˜„í•´ì¤˜.

í•„ìˆ˜ ì‘ì—…:
1. POST /api/condition-memos - ë©”ëª¨ ìƒì„±/ìˆ˜ì •
2. GET /api/condition-memos - ë‚ ì§œë³„ ë©”ëª¨ ì¡°íšŒ
3. Server Actions (actions/condition-memos.ts) êµ¬í˜„
4. í”„ë¡ íŠ¸ì—”ë“œ í™ˆ í˜ì´ì§€ì™€ ì—°ë™

ì°¸ê³  ë¬¸ì„œ:
- docs/user_stories.md (US-009, US-010)
- app/page.tsx (í™ˆ í˜ì´ì§€)
```

### Task 4: íˆìŠ¤í† ë¦¬ ì¡°íšŒ API

```
@docs/tasks/task-history-api-plan.md @docs/user_stories.md (US-003, US-004) ë¥¼ ì°¸ê³ í•˜ì—¬ íˆìŠ¤í† ë¦¬ ì¡°íšŒ APIë¥¼ êµ¬í˜„í•´ì¤˜.

í•„ìˆ˜ ì‘ì—…:
1. GET /api/history - ë‚ ì§œ ë²”ìœ„ë³„ í†µê³„ ì¡°íšŒ
2. ìº˜ë¦°ë” ë·°ìš© ë°ì´í„° í¬ë§· ì œê³µ
3. Server Actions (actions/history.ts) êµ¬í˜„
4. í”„ë¡ íŠ¸ì—”ë“œ CalendarViewì™€ ì—°ë™

ì°¸ê³  ë¬¸ì„œ:
- docs/user_stories.md (US-003, US-004)
- components/features/history/calendar-view.tsx
- app/history/page.tsx
```

### Task 5: AI ë¦¬í¬íŠ¸ ìƒì„± API

```
@docs/tasks/task-ai-reports-api-plan.md @docs/user_stories.md (US-005, US-006, US-007, US-008) @docs/PRD.md ë¥¼ ì°¸ê³ í•˜ì—¬ AI ë¦¬í¬íŠ¸ ìƒì„± APIë¥¼ êµ¬í˜„í•´ì¤˜.

í•„ìˆ˜ ì‘ì—…:
1. Gemini API í´ë¼ì´ì–¸íŠ¸ êµ¬ì¶• (lib/ai/gemini.ts)
   - ëª¨ë¸: gemini-3-flash-preview (í•„ìˆ˜)
2. POST /api/reports/generate - ë¦¬í¬íŠ¸ ìƒì„±
3. GET /api/reports - ë¦¬í¬íŠ¸ ëª©ë¡ ì¡°íšŒ
4. GET /api/reports/[id] - ë¦¬í¬íŠ¸ ìƒì„¸ ì¡°íšŒ
5. Server Actions (actions/reports.ts) êµ¬í˜„
6. í”„ë¡¬í”„íŠ¸ ì„¤ê³„ (ê´€ì°° â†’ í•´ì„ â†’ ì œì•ˆ)
7. í”„ë¡ íŠ¸ì—”ë“œ ReportGenerator, ReportListì™€ ì—°ë™

ì°¸ê³  ë¬¸ì„œ:
- docs/user_stories.md (US-005~008)
- docs/PRD.md (AI ë¦¬í¬íŠ¸ í†¤ ë° ì›ì¹™)
- docs/software_design.md (í”„ë¡¬í”„íŠ¸ ì„¤ê³„)
- components/features/reports/report-generator.tsx
- components/features/reports/report-list.tsx

ì¤‘ìš” ì œì•½ì‚¬í•­:
- Gemini ëª¨ë¸ì€ ë°˜ë“œì‹œ gemini-3-flash-preview ì‚¬ìš©
```

---

## âœ… í†µí•© ì²´í¬ë¦¬ìŠ¤íŠ¸

### Task 1 ì™„ë£Œ í›„
- [ ] Supabase ì—°ê²° í™•ì¸
- [ ] ëª¨ë“  í…Œì´ë¸” ìƒì„± í™•ì¸
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì™„ë£Œ
- [ ] ë‹¤ë¥¸ Task ê°œë°œìì—ê²Œ DB URL ê³µìœ 

### Task 2~5 ì™„ë£Œ í›„
- [ ] ê° API ì—”ë“œí¬ì¸íŠ¸ Postman/Thunder Client í…ŒìŠ¤íŠ¸
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸ì™€ API ì—°ë™ í™•ì¸
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ êµ¬í˜„ í™•ì¸
- [ ] íƒ€ì… ì•ˆì •ì„± í™•ì¸

### ì „ì²´ í†µí•© í›„
- [ ] í™ˆ í˜ì´ì§€: ë¬¼ ì„­ì·¨ ê¸°ë¡ + ì¡°íšŒ + ìˆ˜ì •/ì‚­ì œ
- [ ] íˆìŠ¤í† ë¦¬ í˜ì´ì§€: ìº˜ë¦°ë” ë·° ë°ì´í„° í‘œì‹œ
- [ ] ë¦¬í¬íŠ¸ í˜ì´ì§€: AI ë¦¬í¬íŠ¸ ìƒì„± + ëª©ë¡ ì¡°íšŒ
- [ ] ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸ (ê¸°ë¡ â†’ íˆìŠ¤í† ë¦¬ í™•ì¸ â†’ ë¦¬í¬íŠ¸ ìƒì„±)

---

## ğŸš¨ ì£¼ì˜ì‚¬í•­

### ê³µí†µ ê·œì¹™
1. **í™˜ê²½ ë³€ìˆ˜ í†µì¼**: ëª¨ë“  TaskëŠ” ë™ì¼í•œ `.env.local` ì‚¬ìš©
2. **íƒ€ì… ì•ˆì •ì„±**: TypeScript íƒ€ì… ì •ì˜ í•„ìˆ˜
3. **ì—ëŸ¬ í•¸ë“¤ë§**: ëª¨ë“  APIì— try-catch êµ¬í˜„
4. **ì¼ê´€ëœ ì‘ë‹µ í¬ë§·**: `{ success: boolean, data?: T, error?: string }`

### Gemini API ì‚¬ìš© ì‹œ (Task 5)
- âš ï¸ ëª¨ë¸ëª…: **gemini-3-flash-preview** (ë‹¤ë¥¸ ëª¨ë¸ ì‚¬ìš© ê¸ˆì§€)
- API í‚¤: GEMINI_API_KEY í™˜ê²½ ë³€ìˆ˜
- ìš”ì²­ ì œí•œ: ê³ ë ¤í•˜ì—¬ ì—ëŸ¬ í•¸ë“¤ë§

### ë°ì´í„°ë² ì´ìŠ¤
- í…Œì´ë¸” ìˆ˜ì • ì‹œ ëª¨ë“  Task ê°œë°œìì—ê²Œ ê³µìœ 
- ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ê´€ë¦¬

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [PRD.md](../PRD.md) - í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­
- [user_stories.md](../user_stories.md) - ì‚¬ìš©ì ìŠ¤í† ë¦¬
- [software_design.md](../software_design.md) - ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„

---

**ì‘ì„±ì¼**: 2025-12-20  
**ë²„ì „**: 1.0  
**ë‹¤ìŒ ë‹¨ê³„**: ê° Taskë³„ ìƒì„¸ ê³„íš ë¬¸ì„œ í™•ì¸ ë° ê°œë°œ ì‹œì‘
